# 第六章：常見陷阱與下一步

恭喜你！你已經走完了一次完整的量化策略研究流程。但在你踏上尋找下一個偉大策略的旅程前，讓我們先來了解一些路上常見的陷阱，以及未來的方向。

### 6.1 量化研究的常見陷阱

1.  **過度擬合 (Overfitting):**
    - **這是什麼：** 這是新手最容易犯的錯誤。當你的策略在歷史數據上表現得「過於完美」，很可能只是因為你無意中讓策略「背誦」了歷史的雜訊，而不是學到了真正有效的規律。
    - **比喻：** 你為了通過一場考試，把過去五年的考古題答案都背得滾瓜爛熟，結果考試時出了新題型，你就一題都不會。
    - **如何避免：**
        - **邏輯簡單:** 策略的規則越簡單、越符合直覺，越不容易過度擬合。
        - **參數穩健:** 避免使用過於極端或狹隘的參數。一個好的策略，在參數微調時（例如均線從 20/60 改成 22/62），表現不應有天壤之別。
        - **樣本外測試:** 嚴格遵守我們在第四章提到的**訓練/驗證/測試期**劃分原則。

2.  **未來函數 (Look-ahead Bias):**
    - **這是什麼：** 在回測的當下，不小心用到了「未來」的數據。
    - **範例：** 在決定 **今天** 是否要買進時，用到了 **今天** 的收盤價。在真實世界中，你不可能在盤中就知道收盤價是多少。
    - **如何避免：** 永遠記得，在 `t` 時間點做決策，你只能使用 `t` 以及 `t` 之前的資訊。在程式實作上，常用的技巧就是將訊號或特徵做 `.shift(1)` 處理。

3.  **忽略交易成本 (Transaction Costs):**
    - **這是什麼：** 我們的簡易回測沒有考慮到真實世界的交易成本，包含**手續費 (Commission)** 和**滑價 (Slippage)**。
    - **手續費：** 券商收取的服務費。
    - **滑價：** 你預期成交的價格，與實際成交價格之間的差距。市場波動大或交易量大時尤其明顯。
    - **影響：** 對於高頻、頻繁換手的策略，交易成本的影響是致命的，足以讓一個看起來很賺錢的策略變成虧損。

### 6.2 業界常用平台簡介

雖然 Python 提供了無與倫比的彈性，但在業界，許多交易員也會使用整合式的商業軟體，它們提供了數據、分析、回測、下單一條龍的服務。

1.  **XQ (嘉實資訊):**
    - **定位：** 台灣市場非常普及的看盤與交易軟體。
    - **優點：** 提供非常完整的台灣股票、期貨、選擇權歷史數據與即時報價。圖表功能強大，對散戶和專業投資人友善。
    - **程式化交易：** 內建 `XS` (XScript) 語言，使用者可以撰寫自己的指標和交易策略，並在 XQ 平台上進行回測與自動化交易。

2.  **MultiCharts:**
    - **定位：** 全球知名的專業級交易軟體，廣受程式交易者喜愛。
    - **優點：** 擁有非常強大且專業的回測引擎，支援投資組合級別的回測、參數優化、3D 績效圖等高級功能。可串接的數據源和券商非常多。
    - **程式化交易：** 使用 `PowerLanguage` (衍生自 EasyLanguage)，這是一種專為交易邏輯設計的語言，語法相對直觀，讓交易員能更容易地將想法轉化為策略。

**Python vs. 商業軟體：**
- **Python:** **彈性最高**、**免費**。適合需要高度客製化、進行複雜機器學習研究的使用者。但學習曲線較陡，需要自己處理數據、建立回測環境。
- **商業軟體:** **方便快速**、**一站式服務**。適合想專注於策略邏輯、快速驗證想法的使用者。但通常需要付費，且策略開發會受限於平台本身的功能。

### 6.3 下一步可以探索什麼？

- **嘗試更多的技術指標：** RSI, MACD, Bollinger Bands...
- **加入成交量分析：** 「價漲量增」和「價漲量縮」是否代表不同意義？
- **考慮不同時間週期：** 你的策略在 5 分K、日K 上也有效嗎？
- **開始使用 `VectorBT`:** 將我們用迴圈寫的策略，改用 `VectorBT` 實現，感受一下速度的提升！ 